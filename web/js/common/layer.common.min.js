(function(){var g={};g.func={};g.func.loading=function(action,type){if(action==="close"){layer.closeAll("loading")}else{layer.load(type?type:3)}};g.func.tips=function(message,callback,time){layer.msg(message,{time:time?time*1e3:2e3})};g.func.alert=function(message,callback){layer.alert(message,function(index){layer.close(index);$.isFunction(callback)&&callback.apply(this)})};g.func.warn=function(message,callback,time){layer.msg(message,{icon:7,time:time?time*1e3:2e3})};g.func.success=function(message,callback,time){layer.msg(message,{icon:6,time:time?time*1e3:2e3,end:function(){$.isFunction(callback)&&callback.apply(this)}})};g.func.error=function(message,callback,time){layer.msg(message,{icon:2,time:time?time*1e3:2e3,end:function(){$.isFunction(callback)&&callback.apply(this)}})};g.func.confirm=function(message,yes,no){layer.confirm(message,{time:0,btn:["确定","取消"],title:"温馨提示",shade:.6,shadeClose:true,yes:function(index){layer.close(index);$.isFunction(yes)&&yes.apply(this)},cancel:function(index){layer.close(index);$.isFunction(no)&&no.apply(this)}})};g.func.dialog=function(url,title,width,height,must_use){must_use=must_use||false;if(!must_use){height=Math.min(height||597,$(window).height()-50);width=Math.min(width||960,$(window).width()-30)}layer.open({type:2,shadeClose:true,maxmin:true,title:title||"窗口",shade:[.8,"#000"],area:[width+"px",height+"px"],shift:-1,content:url+((url.indexOf("?")>-1?"&":"?")+"_dialog=1")})};g.func.goTo=function(url){window.location.href=url};g.func.reload=function(){window.location.reload()};g.func.reloadAll=function(){window.location.reload()};g.func.layerCloseSelf=function(){var index=parent.layer.getFrameIndex(window.name);parent.layer.close(index)};g.func.page=function(str,title,callback,width,height){height=Math.min(height||597,$(window).height()-50);width=Math.min(width||960,$(window).width()-30);layer.open({type:1,shadeClose:true,maxmin:true,title:title||"窗口",shade:[.8,"#000"],area:[width+"px",height+"px"],shift:-1,content:str,success:function(){$.isFunction(callback)&&callback.apply(this)}})};g.func.prompt=function(str,title,callback,width,height){if(!width){width="auto"}else{width=width+"px"}if(!height){height="auto"}else{height=height+"px"}layer.prompt({formType:2,value:str,title:title,area:[width,height]},function(value,index,elem){$.isFunction(callback)&&callback.apply(this,[value]);layer.close(index)})};g.func.ajaxPost=function(url,data,success,error,complete,beforeSend,showMsg){if(typeof showMsg=="undefined"){showMsg=true}$.ajax({url:url,data:data,type:"post",dataType:"json",beforeSend:function(){$.isFunction(beforeSend)&&beforeSend.apply(this);g.func.loading()},complete:function(complete){g.func.loading("close");$.isFunction(complete)&&complete.apply(this)},success:function(res){if(res.code&&res.code===200){if(showMsg&&res.msg){g.func.tips(res.msg)}$.isFunction(success)&&success.apply(this,[res])}else{if(showMsg&&res.msg){g.func.error(res.msg)}$.isFunction(error)&&error.apply(this,[res])}},error:function(){g.func.error("无法提交,请检查网络连接是否正常")}})};g.func.ajaxPostNoLoading=function(url,data,success,error,complete,beforeSend,showMsg){if(typeof showMsg=="undefined"){showMsg=true}$.ajax({url:url,data:data,type:"post",dataType:"json",beforeSend:function(beforeSend){$.isFunction(beforeSend)&&beforeSend.apply(this);g.func.loading()},complete:function(complete){$.isFunction(complete)&&complete.apply(this)},success:function(res){if(res.code&&res.code===200){if(showMsg&&res.msg){g.func.success(res.msg)}$.isFunction(success)&&success.apply(this,[res])}else{if(showMsg&&res.msg){g.func.error(res.msg)}$.isFunction(error)&&error.apply(this,[res])}},error:function(){g.func.error("无法提交,请检查网络连接是否正常")}})};g.func.isMobile=function(mobile){return/^1[3,4,5,6,7,8,9]\d{9}$/.test(mobile)};g.func.isEmail=function(mobile){return/^[a-zA-Z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$/.test(mobile)};window.g=g})(jQuery);